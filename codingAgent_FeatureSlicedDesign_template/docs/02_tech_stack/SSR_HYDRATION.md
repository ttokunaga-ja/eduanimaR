# SSR/Hydration（必須）: 概念・意思決定基準・2026年トレンド

このドキュメントは、SSR/Hydration を **Must（必須）** とした上で、
- 何が起きているか（概念）
- どのページで何を優先するか（例外設計）
- 2026 年時点の技術トレンド（RSC）
を、意思決定者/実装者が同じ言葉で説明できるように固定します。

---

## 1. BLUF（結論）

- SSR/Hydration は **公開サイト（SEO/集客が重要）かつ動的コンテンツを含むプロダクト** では必須の選択肢です。
- 一方で、**SEO が不要な管理画面** や **完全に静的な小規模ページ** では、SSR のメリットが薄く、CSR/SSG がコスト面で有利です。
- 2026 年時点の実務では、二者択一ではなく **ページ単位/コンポーネント単位の Hybrid** が主流です。

本テンプレートでは「SSR/Hydration を採用する」こと自体は Must とし、
例外（CSR/SSG 寄せ）は **ページ単位の設計判断として明文化** します。

---

## 2. 概念の「超」わかりやすい説明

### SSR（Server-Side Rendering）
- 例え：シェフ（サーバ）が厨房で盛り付けた料理（HTML）を客席（ブラウザ）へ運ぶ
- メリット：席についた直後に見える（初期表示が速い）
- デメリット：厨房が混むと遅い（サーバ負荷）

### CSR（Client-Side Rendering）
- 例え：食材キット（JavaScript）だけを渡し、客がテーブルで調理する
- メリット：サーバ負荷が低い／2回目以降は速い場合がある
- デメリット：最初は空っぽ（初期表示が遅い）

### Hydration
- SSR で届いた “見た目だけの HTML” に、ブラウザ側で JavaScript を適用して操作可能にする工程
- 例え：乾燥わかめを水で戻す
- 注意：Hydration が終わるまで UI が反応しない瞬間が発生しうる（体感品質に影響）

---

## 3. 意思決定マトリクス（例外判断の基準）

SSR/Hydration を Must とした上で、ページのレンダリング戦略（SSR/SSG/CSR寄せ）を判断する基準です。

| 判断軸 | SSR/Hydration を強く推奨 | CSR/SSG 寄せを検討 | 背景 |
| :--- | :--- | :--- | :--- |
| SEO重要度 | 極めて高い | 低い・不要 | SSR の HTML 返却はインデックス/OG 表示の確実性が高い |
| 初期表示速度（FCP/LCP） | 最優先 | 優先度低 | モバイル/低速回線で SSR の優位が出やすい |
| 更新頻度 | 高頻度・リクエスト毎に変化 | 低頻度・静的 | SSG/ISR は速く安価 |
| サーバコスト/運用 | 予算/体制あり | 低コストが最重要 | SSR は実行基盤コストが出る |
| インタラクティブ性 | 中〜高 | 超高 or 低 | 高インタラクションは CSR の体験が良い場合がある |

---

## 4. 2026年トレンド：RSC による Hydration コスト削減

- RSC（React Server Components）により、**クライアントに送る JavaScript を減らし、Hydration を最小化** できます。
- 実務の最適解は「SSR する」ことに加えて **Client Components を必要最小限に押し下げる** ことです。

結論：
- “描画だけ” は RSC で完結
- “操作が必要” な部分だけ Client 化

---

## 5. プロジェクトリーダー向けチェックリスト（例外の正当化）

1. URL を開いて 1 秒以内に見えないと損失が大きいか？ → Yes: SSR を強める
2. SNS シェア（OG）でカード表示が必要か？ → Yes: SSR/動的メタデータ必須
3. ログイン必須の社内ダッシュボードか？ → Yes: CSR/SSG 寄せの余地
4. リクエスト毎に検索結果/在庫などが変わるか？ → Yes: SSR（または動的 + 適切なキャッシュ）

---

## 6. 関連ドキュメント（本テンプレの契約）

- 取得と DTO/認可の置き場所： [../01_architecture/DATA_ACCESS_LAYER.md](../01_architecture/DATA_ACCESS_LAYER.md)
- Next キャッシュと再検証： [../01_architecture/CACHING_STRATEGY.md](../01_architecture/CACHING_STRATEGY.md)
- TanStack Query の SSR/Hydration 手順： [STATE_QUERY.md](./STATE_QUERY.md)
